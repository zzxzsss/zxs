 -- Load UI Library
local Library = loadstring(game:HttpGet("https://raw.githubusercontent.com/zzxzsss/zxs/refs/heads/main/ui/dummyui"))()

-- Create Main Window
local Window = Library:Window({
    Title = "99 Nights in the Forest",
    Desc = "script made zzz hub",
    Icon = 105059922903197,
    Theme = "Dark",
    Config = {
        Keybind = Enum.KeyCode.LeftControl,
        Size = UDim2.new(0, 500, 0, 400)
    },
    CloseUIButton = {
        Enabled = true,
        Text = "zzz hub"
    }
})

local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local RunService = game:GetService("RunService")

-- === Main Configurations === 

local Players = game:GetService("Players")
local player = Players.LocalPlayer

-- Safe zone setup: 9 baseplates in a grid
local safezoneBaseplates = {}
local baseplateSize = Vector3.new(2048, 1, 2048)
local baseY = 100
local centerPos = Vector3.new(0, baseY, 0) -- original center

for dx = -1, 1 do
    for dz = -1, 1 do
        local pos = centerPos + Vector3.new(dx * baseplateSize.X, 0, dz * baseplateSize.Z)
        local baseplate = Instance.new("Part")
        baseplate.Name = "SafeZoneBaseplate"
        baseplate.Size = baseplateSize
        baseplate.Position = pos
        baseplate.Anchored = true
        baseplate.CanCollide = true
        baseplate.Transparency = 1
        baseplate.Color = Color3.fromRGB(255, 255, 255)
        baseplate.Parent = workspace
        table.insert(safezoneBaseplates, baseplate)
    end
end

-- Utility to convert "x, y, z" string to CFrame
local function stringToCFrame(str)
    local x, y, z = str:match("([^,]+),%s*([^,]+),%s*([^,]+)")
    return CFrame.new(tonumber(x), tonumber(y), tonumber(z))
end

-- Teleport function with optional tween duration
local function teleportToTarget(cf, duration)
    local char = game.Players.LocalPlayer.Character
    if not char then return end
    local hrp = char:FindFirstChild("HumanoidRootPart")
    if not hrp then return end

    if duration and duration > 0 then
        local ts = game:GetService("TweenService")
        local info = TweenInfo.new(duration, Enum.EasingStyle.Linear)
        local goal = { CFrame = cf }
        local tween = ts:Create(hrp, info, goal)
        tween:Play()
    else
        hrp.CFrame = cf
    end
end

-- Main Tab
local Main = Window:Tab({Title = "Main", Icon = "star"}) do
    Main:Section({Title = "Main Functions"})

    -- Checkbox to toggle visibility/collision for all baseplates
    Main:Toggle({
        Title = "Show Safe Zone",
        Desc = "Toggle safe zone baseplate visibility",
        Value = false,
        Callback = function(enabled)
            for _, baseplate in ipairs(safezoneBaseplates) do
                baseplate.Transparency = enabled and 0.8 or 1
                baseplate.CanCollide = enabled
            end
        end
    })

    -- Kill Aura Variables
    local killAuraToggle = false
    local radius = 200

    -- Supported tools and their damage IDs
    local toolsDamageIDs = {
        ["Old Axe"] = "1_8982038982",
        ["Good Axe"] = "112_8982038982",
        ["Strong Axe"] = "116_8982038982",
        ["Chainsaw"] = "647_8992824875",
        ["Spear"] = "196_8999010016"
    }

    -- Try to find any supported tool in inventory with damageID
    local function getAnyToolWithDamageID()
        for toolName, damageID in pairs(toolsDamageIDs) do
            local tool = player.Inventory:FindFirstChild(toolName)
            if tool then
                return tool, damageID
            end
        end
        return nil, nil
    end

    -- Equip a given tool
    local function equipTool(tool)
        if tool then
            game:GetService("ReplicatedStorage").RemoteEvents.EquipItemHandle:FireServer("FireAllClients", tool)
        end
    end

    -- Unequip a given tool
    local function unequipTool(tool)
        if tool then
            game:GetService("ReplicatedStorage").RemoteEvents.UnequipItemHandle:FireServer("FireAllClients", tool)
        end
    end

    -- Kill Aura main loop
    local function killAuraLoop()
        while killAuraToggle do
            local character = player.Character or player.CharacterAdded:Wait()
            local hrp = character:FindFirstChild("HumanoidRootPart")
            if hrp then
                local tool, damageID = getAnyToolWithDamageID()
                if tool and damageID then
                    equipTool(tool)

                    for _, mob in ipairs(workspace.Characters:GetChildren()) do
                        if mob:IsA("Model") then
                            local part = mob:FindFirstChildWhichIsA("BasePart")
                            if part and (part.Position - hrp.Position).Magnitude <= radius then
                                pcall(function()
                                    game:GetService("ReplicatedStorage").RemoteEvents.ToolDamageObject:InvokeServer(
                                        mob,
                                        tool,
                                        damageID,
                                        CFrame.new(part.Position)
                                    )
                                end)
                            end
                        end
                    end

                    task.wait(0.1)
                else
                    warn("No supported tool found in inventory")
                    task.wait(1)
                end
            else
                task.wait(0.5)
            end
        end
    end

    Main:Toggle({
        Title = "Kill Aura",
        Desc = "Automatically attack nearby enemies",
        Value = false,
        Callback = function(state)
            killAuraToggle = state
            if state then
                task.spawn(killAuraLoop)
            else
                local tool, _ = getAnyToolWithDamageID()
                unequipTool(tool)
            end
        end
    })

    Main:Slider({
        Title = "Kill Aura Radius",
        Min = 20,
        Max = 500,
        Rounding = 0,
        Value = 200,
        Callback = function(value)
            radius = math.clamp(value, 20, 500)
        end
    })
end

-- Auto Tab
local Auto = Window:Tab({Title = "Auto", Icon = "zap"}) do
    Auto:Section({Title = "Auto Farm Utilities"})

    -- === SERVICES ===
    local ReplicatedStorage = game:GetService("ReplicatedStorage")
    local Players = game:GetService("Players")
    local Workspace = game:GetService("Workspace")

    -- === PLAYER REFERENCES ===
    local player = Players.LocalPlayer
    local character = player.Character or player.CharacterAdded:Wait()
    local rootPart = character:WaitForChild("HumanoidRootPart")
    local itemsFolder = Workspace:WaitForChild("Items")
    local remoteEvents = ReplicatedStorage:WaitForChild("RemoteEvents")
    local remoteConsume = remoteEvents:WaitForChild("RequestConsumeItem")

    -- === POSITIONS ===
    local campfireDropPos = Vector3.new(0, 19, 0)
    local machineDropPos = Vector3.new(21, 16, -5)

    -- === ITEM LISTS ===
    local campfireFuelItems = {"Log", "Coal", "Fuel Canister", "Oil Barrel", "Biofuel"}
    local autocookItems = {"Morsel", "Steak"}
    local autoGrindItems = {"UFO Junk", "UFO Component", "Old Car Engine", "Broken Fan", "Old Microwave", "Bolt", "Log", "Cultist Gem", "Sheet Metal", "Old Radio","Tyre","Washing Machine", "Cultist Experiment", "Cultist Component", "Gem of the Forest Fragment", "Broken Microwave"}
    local autoEatFoods = {"Cooked Steak", "Cooked Morsel", "Berry", "Carrot", "Apple"}
    local biofuelItems = {"Carrot", "Cooked Morsel", "Morsel", "Steak", "Cooked Steak", "Log"}

    -- === TOGGLES ===
    local autoFuelEnabledItems = {}
    local autoCookEnabledItems = {}
    local autoGrindEnabledItems = {}
    local autoEatEnabled = false
    local autoEatHPEnabled = false
    local autoBreakEnabled = false
    local autoBiofuelEnabledItems = {}
    local alwaysFeedEnabledItems = {}

    -- === MOVE ITEM FUNCTION (STABLE) ===
    local function moveItemToPos(item, position)
        if not item or not item:IsDescendantOf(workspace) then return end
        local part = item.PrimaryPart or item:FindFirstChildWhichIsA("BasePart") or item:FindFirstChild("Handle")
        if not part then return end

        if not item.PrimaryPart then
            pcall(function() item.PrimaryPart = part end)
        end

        pcall(function()
            remoteEvents.RequestStartDraggingItem:FireServer(item)
            task.wait(0.05)
            item:SetPrimaryPartCFrame(CFrame.new(position))
            task.wait(0.05)
            remoteEvents.StopDraggingItem:FireServer(item)
        end)
    end

    Auto:Toggle({
        Title = "Auto Eat",
        Desc = "Automatically eat food every 3 seconds",
        Value = false,
        Callback = function(checked)
            autoEatEnabled = checked
        end
    })

    Auto:Toggle({
        Title = "Auto Eat (HP Based)",
        Desc = "Eat when hunger bar is low",
        Value = false,
        Callback = function(checked)
            autoEatHPEnabled = checked
        end
    })

    -- === BACKGROUND COROUTINES ===
    coroutine.wrap(function() -- Always Feed Campfire
        while true do
            for itemName, enabled in pairs(alwaysFeedEnabledItems) do
                if enabled then
                    for _, item in ipairs(itemsFolder:GetChildren()) do
                        if item.Name == itemName then
                            moveItemToPos(item, campfireDropPos)
                        end
                    end
                end
            end
            task.wait(2)
        end
    end)()

    coroutine.wrap(function() -- HP-Based Feed
        local campfire = Workspace:WaitForChild("Map"):WaitForChild("Campground"):WaitForChild("MainFire")
        local fillFrame = campfire.Center.BillboardGui.Frame.Background.Fill
        while true do
            local healthPercent = fillFrame.Size.X.Scale
            if healthPercent < 0.7 then
                repeat
                    for itemName, enabled in pairs(autoFuelEnabledItems) do
                        if enabled then
                            for _, item in ipairs(itemsFolder:GetChildren()) do
                                if item.Name == itemName then
                                    moveItemToPos(item, campfireDropPos)
                                end
                            end
                        end
                    end
                    task.wait(0.5)
                    healthPercent = fillFrame.Size.X.Scale
                until healthPercent >= 1
            end
            task.wait(2)
        end
    end)()

    coroutine.wrap(function() -- Auto Cook
        while true do
            for itemName, enabled in pairs(autoCookEnabledItems) do
                if enabled then
                    for _, item in ipairs(itemsFolder:GetChildren()) do
                        if item.Name == itemName then
                            moveItemToPos(item, campfireDropPos)
                        end
                    end
                end
            end
            task.wait(2.5)
        end
    end)()

    coroutine.wrap(function() -- Auto Grind
        while true do
            for itemName, enabled in pairs(autoGrindEnabledItems) do
                if enabled then
                    for _, item in ipairs(itemsFolder:GetChildren()) do
                        if item.Name == itemName then
                            moveItemToPos(item, machineDropPos)
                        end
                    end
                end
            end
            task.wait(2.5)
        end
    end)()

    coroutine.wrap(function() -- Auto Eat
        while true do
            if autoEatEnabled then
                local available = {}
                for _, item in ipairs(itemsFolder:GetChildren()) do
                    if table.find(autoEatFoods, item.Name) then
                        table.insert(available, item)
                    end
                end
                if #available > 0 then
                    local food = available[math.random(1, #available)]
                    pcall(function() remoteConsume:InvokeServer(food) end)
                end
            end
            task.wait(3)
        end
    end)()

    local player = game:GetService("Players").LocalPlayer
    local hungerBar = player:WaitForChild("PlayerGui"):WaitForChild("Interface"):WaitForChild("StatBars"):WaitForChild("HungerBar"):WaitForChild("Bar")

    coroutine.wrap(function() -- Auto Eat (HP Bar Based)
        while true do
            if autoEatHPEnabled then
                if hungerBar.Size.X.Scale <= 0.5 then
                    repeat
                        local currentHunger = hungerBar.Size.X.Scale

                        local available = {}
                        for _, item in ipairs(itemsFolder:GetChildren()) do
                            if item.Name and table.find(autoEatFoods, item.Name) then
                                table.insert(available, item)
                                print("Found available food item: ", item.Name)
                            end
                        end

                        if #available > 0 then
                            local food = available[math.random(1, #available)]
                            if food then
                                pcall(function()
                                    remoteConsume:InvokeServer(food)
                                end)
                            end
                        else
                            warn("No available food found in inventory.")
                            break -- Stop trying if no food
                        end

                        task.wait(1) -- Wait for GUI to reflect update

                    until hungerBar.Size.X.Scale >= 0.99 or not autoEatHPEnabled
                end
            end
            task.wait(3)
        end
    end)()

    coroutine.wrap(function() -- Auto Biofuel
        local biofuelProcessorPos
        while true do
            if not biofuelProcessorPos then
                local processor = Workspace:FindFirstChild("Structures") and Workspace.Structures:FindFirstChild("Biofuel Processor")
                local part = processor and processor:FindFirstChild("Part")
                if part then
                    biofuelProcessorPos = part.Position + Vector3.new(0, 5, 0)
                end
            end

            if biofuelProcessorPos then
                for itemName, enabled in pairs(autoBiofuelEnabledItems) do
                    if enabled then
                        for _, item in ipairs(itemsFolder:GetChildren()) do
                            if item.Name == itemName then
                                moveItemToPos(item, biofuelProcessorPos)
                            end
                        end
                    end
                end
            end
            task.wait(2)
        end
    end)()

    -- === TREE TELEPORT SYSTEM ===
    local originalTreeCFrames = {}
    local treesBrought = false

    local function getAllSmallTrees()
        local trees = {}
        local function scan(folder)
            for _, obj in ipairs(folder:GetChildren()) do
                if obj:IsA("Model") and obj.Name == "Small Tree" then
                    table.insert(trees, obj)
                end
            end
        end

        local map = Workspace:FindFirstChild("Map")
        if map then
            if map:FindFirstChild("Foliage") then scan(map.Foliage) end
            if map:FindFirstChild("Landmarks") then scan(map.Landmarks) end
        end
        return trees
    end

    local function findTrunk(tree)
        for _, part in ipairs(tree:GetDescendants()) do
            if part:IsA("BasePart") and part.Name == "Trunk" then return part end
        end
    end

    local function bringAllTrees()
        local target = CFrame.new(rootPart.Position + rootPart.CFrame.LookVector * 10)
        for _, tree in ipairs(getAllSmallTrees()) do
            local trunk = findTrunk(tree)
            if trunk then
                if not originalTreeCFrames[tree] then originalTreeCFrames[tree] = trunk.CFrame end
                tree.PrimaryPart = trunk
                trunk.Anchored = false
                trunk.CanCollide = false
                task.wait()
                tree:SetPrimaryPartCFrame(target + Vector3.new(math.random(-5,5), 0, math.random(-5,5)))
                trunk.Anchored = true
            end
        end
        treesBrought = true
    end

    local function restoreTrees()
        for tree, cframe in pairs(originalTreeCFrames) do
            local trunk = findTrunk(tree)
            if trunk then
                tree.PrimaryPart = trunk
                tree:SetPrimaryPartCFrame(cframe)
                trunk.Anchored = true
                trunk.CanCollide = true
            end
        end
        originalTreeCFrames = {}
        treesBrought = false
    end

    Auto:Toggle({
        Title = "Auto Bring All Small Trees",
        Desc = "Bring all small trees to your location",
        Value = false,
        Callback = function(checked)
            autoBreakEnabled = checked
            if checked and not treesBrought then
                bringAllTrees()
            elseif not checked and treesBrought then
                restoreTrees()
            end
        end
    })
end

-- Item TP/ESP Tab
local ItemTP = Window:Tab({Title = "Item TP/ESP", Icon = "package"}) do
    ItemTP:Section({Title = "Item ESP & Teleportation"})

    ItemTP:Toggle({
        Title = "Item ESP",
        Desc = "Show ESP for items in the world",
        Value = false,
        Callback = function(state)
            local itemFolder = workspace:FindFirstChild("Items")
            if not itemFolder then
                warn("workspace.Items folder not found")
                return
            end

            local itemNames = {
                ["Revolver"] = true, ["Oil Barrel"] = true, ["Chainsaw"] = true, ["Giant Sack"] = true, ["Bunny Foot"] = true,["MedKit"] = true, ["Alien Chest"] = true, ["Berry"] = true,
                ["Bolt"] = true, ["Broken Fan"] = true, ["Carrot"] = true, ["Coal"] = true,
                ["Coin Stack"] = true, ["Hologram Emitter"] = true, ["Item Chest"] = true,
                ["Laser Fence Blueprint"] = true, ["Log"] = true, ["Old Flashlight"] = true,
                ["Old Radio"] = true, ["Sheet Metal"] = true, ["Bandage"] = true, ["Rifle"] = true
            }

            local connections = {}

            local function createESP(model)
                if not model:IsA("Model") or not itemNames[model.Name] then return end
                if not model.PrimaryPart or model:FindFirstChild("ESP") then return end

                local billboard = Instance.new("BillboardGui")
                billboard.Name = "ESP"
                billboard.Size = UDim2.new(0, 100, 0, 30)
                billboard.Adornee = model.PrimaryPart
                billboard.AlwaysOnTop = true
                billboard.StudsOffset = Vector3.new(0, 3, 0)

	            local customFont = Font.new("rbxassetid://16658246179", Enum.FontWeight.Regular, Enum.FontStyle.Normal)
	            local label = Instance.new("TextLabel")

	            label.Size = UDim2.new(1, 0, 1, 0)
	            label.TextSize = 17
	            label.BackgroundTransparency = 1
	            label.TextColor3 = Color3.new(1, 1, 1)
	            label.TextStrokeTransparency = 0.5
	            label.TextScaled = false
	            label.FontFace = customFont
	            label.Text = model.Name

                label.Parent = billboard

                billboard.Parent = model
            end

            local function removeAllESP()
                for _, model in itemFolder:GetChildren() do
                    local esp = model:FindFirstChild("ESP")
                    if esp then esp:Destroy() end
                end
            end

            if state then
                -- Create ESPs for all current items
                for _, model in itemFolder:GetChildren() do
                    createESP(model)
                end

                -- Add ESPs for any new items added
                local connection = itemFolder.ChildAdded:Connect(function(model)
                    if model:IsA("Model") and itemNames[model.Name] then
                        model:GetPropertyChangedSignal("PrimaryPart"):Wait()
                        createESP(model)
                    end
                end)

                table.insert(connections, connection)
            else
                -- Disable ESPs
                removeAllESP()

                -- Disconnect any listeners
                for _, conn in connections do
                    if conn.Disconnect then conn:Disconnect() end
                end
                table.clear(connections)
            end
        end
    })
end

-- Game TP Tab
local GameTP = Window:Tab({Title = "Game TP", Icon = "map-pin"}) do
    GameTP:Section({Title = "Game Teleports"})

    local storyCoords = {
        { "[campsite] camp site", "0, 8, -0"},
        { "[safezone] safe zone", "0, 110, -0" }
    }

    GameTP:Button({
        Title = "Teleport to Camp Site",
        Desc = "Go to the camp site",
        Callback = function()
            teleportToTarget(stringToCFrame("0, 8, -0"), 0.1)
        end
    })

    GameTP:Button({
        Title = "Teleport to Safe Zone", 
        Desc = "Go to the safe zone",
        Callback = function()
            teleportToTarget(stringToCFrame("0, 110, -0"), 0.1)
        end
    })

    -- === AUTO STRONGHOLD ===
    GameTP:Section({Title = "Stronghold"})

    local function getStrongholdTimerLabel()
        return workspace:FindFirstChild("Map")
            and workspace.Map:FindFirstChild("Landmarks")
            and workspace.Map.Landmarks:FindFirstChild("Stronghold")
            and workspace.Map.Landmarks.Stronghold:FindFirstChild("Functional")
            and workspace.Map.Landmarks.Stronghold.Functional:FindFirstChild("Sign")
            and workspace.Map.Landmarks.Stronghold.Functional.Sign:FindFirstChild("SurfaceGui")
            and workspace.Map.Landmarks.Stronghold.Functional.Sign.SurfaceGui.Frame:FindFirstChild("Body")
    end

    GameTP:Button({
        Title = "Teleport to Stronghold",
        Desc = "Go to stronghold entrance",
        Callback = function()
            local targetPart = workspace:FindFirstChild("Map")
                and workspace.Map:FindFirstChild("Landmarks")
                and workspace.Map.Landmarks:FindFirstChild("Stronghold")
                and workspace.Map.Landmarks.Stronghold:FindFirstChild("Functional")
                and workspace.Map.Landmarks.Stronghold.Functional:FindFirstChild("EntryDoors")
                and workspace.Map.Landmarks.Stronghold.Functional.EntryDoors:FindFirstChild("DoorRight")
                and workspace.Map.Landmarks.Stronghold.Functional.EntryDoors.DoorRight:FindFirstChild("Model")

            if targetPart then
                local children = targetPart:GetChildren()
                local destination = children[5]

                if destination and destination:IsA("BasePart") then
                    local hrp = game.Players.LocalPlayer.Character and game.Players.LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
                    if hrp then
                        -- Offset slightly above the target to avoid clipping
                        hrp.CFrame = destination.CFrame + Vector3.new(0, 5, 0)
                        print("Teleported to Stronghold DoorRight Model child #5.")
                    else
                        warn("HumanoidRootPart not found!")
                    end
                else
                    warn("Child #5 is missing or not a BasePart!")
                end
            else
                warn("DoorRight.Model path not found!")
            end
        end
    })

    GameTP:Button({
        Title = "Teleport to Diamond Chest",
        Desc = "Go to stronghold diamond chest",
        Callback = function()
            local items = workspace:FindFirstChild("Items")
            if not items then
                warn("Items folder not found!")
                return
            end

            local chest = items:FindFirstChild("Stronghold Diamond Chest")
            if not chest then
                warn("Stronghold Diamond Chest not found!")
                return
            end

            local chestLid = chest:FindFirstChild("ChestLid")
            if not chestLid then
                warn("ChestLid not found!")
                return
            end

            local diamondchest = chestLid:FindFirstChild("Meshes/diamondchest_Cube.002")
            if not diamondchest then
                warn("Diamond chest mesh not found!")
                return
            end

            local hrp = game.Players.LocalPlayer.Character and game.Players.LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
            if hrp then
                hrp.CFrame = diamondchest.CFrame + Vector3.new(0, 5, 0)
            else
                warn("HumanoidRootPart not found!")
            end
        end
    })
end

-- Mob TP Tab
local MobTP = Window:Tab({Title = "Mob TP", Icon = "users"}) do
    MobTP:Section({Title = "Mob Teleportation"})

    local characterFolder = workspace:WaitForChild("Characters")
    local remoteEvents = game:GetService("ReplicatedStorage"):WaitForChild("RemoteEvents")

    local possibleCharacters = {
        "Alpha Wolf",
        "Bear", 
        "Lost Child",
        "Lost Child2",
        "Lost Child3", 
        "Lost Child4",
        "Wolf",
        "Bunny",
        "Cultist",
        "Alien"
    }

    local function getMainPart(model)
        if model.PrimaryPart then
            return model.PrimaryPart
        end
        for _, part in ipairs(model:GetDescendants()) do
            if part:IsA("BasePart") then
                return part
            end
        end
        return nil
    end

    local function teleportCharacter(characterName)
        local stackOffsetY = 3
        local count = 0

        for _, model in ipairs(characterFolder:GetChildren()) do
            if model.Name == characterName then
                local mainPart = getMainPart(model)
                if mainPart and player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
                    local targetCFrame = player.Character.HumanoidRootPart.CFrame + Vector3.new(0, count * stackOffsetY, 0)
                    if model.PrimaryPart then
                        model:SetPrimaryPartCFrame(targetCFrame)
                    else
                        mainPart.CFrame = targetCFrame
                    end
                    count = count + 1
                else
                    warn("No main part found for character:", model:GetFullName())
                end
            end
        end
    end

    for _, characterName in ipairs(possibleCharacters) do
        MobTP:Button({
            Title = "TP " .. characterName,
            Desc = "Teleport " .. characterName .. " to you",
            Callback = function()
                teleportCharacter(characterName)
            end
        })
    end
end

-- Player Tab
local Player = Window:Tab({Title = "Player", Icon = "user"}) do
    Player:Section({Title = "Player Modifications"})

    -- JumpPower Slider
    Player:Slider({
        Title = "Jump Power",
        Min = 50,
        Max = 700,
        Rounding = 0,
        Value = 50,
        Callback = function(value)
            local char = LocalPlayer.Character
            if char and char:FindFirstChild("Humanoid") then
                char.Humanoid.JumpPower = value
            end
        end
    })

    -- WalkSpeed Slider with Persistent Behavior
    Player:Slider({
        Title = "Walk Speed",
        Min = 16,
        Max = 700,
        Rounding = 0,
        Value = 16,
        Callback = function(value)
            _G.HackedWalkSpeed = value

            local function applyWalkSpeed(humanoid)
                if humanoid then
                    humanoid.WalkSpeed = _G.HackedWalkSpeed
                    humanoid.Changed:Connect(function(property)
                        if property == "WalkSpeed" and humanoid.WalkSpeed ~= _G.HackedWalkSpeed then
                            humanoid.WalkSpeed = _G.HackedWalkSpeed
                        end
                    end)
                end
            end

            if LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("Humanoid") then
                applyWalkSpeed(LocalPlayer.Character.Humanoid)
            end

            LocalPlayer.CharacterAdded:Connect(function(char)
                char:WaitForChild("Humanoid")
                applyWalkSpeed(char:FindFirstChild("Humanoid"))
            end)
        end
    })

    Player:Toggle({
        Title = "Walk Speed Toggle (50)",
        Desc = "Toggle between normal and fast speed",
        Value = false,
        Callback = function(toggle)
            if toggle == true then 
                _G.HackedWalkSpeed = 50
            else
                _G.HackedWalkSpeed = 16
            end

            local function applyWalkSpeed(humanoid)
                if humanoid then
                    humanoid.WalkSpeed = _G.HackedWalkSpeed
                    humanoid.Changed:Connect(function(property)
                        if property == "WalkSpeed" and humanoid.WalkSpeed ~= _G.HackedWalkSpeed then
                            humanoid.WalkSpeed = _G.HackedWalkSpeed
                        end
                    end)
                end
            end

            if LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("Humanoid") then
                applyWalkSpeed(LocalPlayer.Character.Humanoid)
            end

            LocalPlayer.CharacterAdded:Connect(function(char)
                char:WaitForChild("Humanoid")
                applyWalkSpeed(char:FindFirstChild("Humanoid"))
            end)
        end
    })
end

-- Visuals Tab
local Visuals = Window:Tab({Title = "Visuals", Icon = "eye"}) do
    Visuals:Section({Title = "Visual Modifications"})

    --// SERVICES
    local Players = game:GetService("Players")
    local RunService = game:GetService("RunService")
    local CoreGui = game:GetService("CoreGui")
    local UserInputService = game:GetService("UserInputService")

    local LocalPlayer = Players.LocalPlayer

    --// CONFIG
    local espTransparency = 0.4
    local teamCheck = true

    --// CUSTOM FONT
    local customFont = Font.new("rbxassetid://16658246179", Enum.FontWeight.Regular, Enum.FontStyle.Normal)

    --// STATE
    local BillboardESPs = {}
    local ChamsESPs = {}
    local ESPConnections = {}

    local ESPEnabled = false
    local ChamsEnabled = false

    --// HELPERS
    local function round(num, decimals)
	    return tonumber(string.format("%." .. (decimals or 0) .. "f", num))
    end

    local function getRoot(char)
	    return char and char:FindFirstChild("HumanoidRootPart")
    end

    --// BILLBOARD ESP
    local function createBillboardESP(plr)
	    if BillboardESPs[plr] or plr == LocalPlayer then return end
	    if not plr.Character or not plr.Character:FindFirstChild("Head") then return end

	    local gui = Instance.new("BillboardGui")
	    gui.Name = "Billboard_ESP"
	    gui.Adornee = plr.Character.Head
	    gui.Parent = plr.Character.Head
	    gui.Size = UDim2.new(0, 100, 0, 40)
	    gui.AlwaysOnTop = true
	    gui.StudsOffset = Vector3.new(0, 2, 0)

	    local label = Instance.new("TextLabel", gui)
	    label.Size = UDim2.new(1, 0, 1, 0)
	    label.BackgroundTransparency = 1
	    label.TextColor3 = Color3.new(1, 1, 1)
	    label.TextStrokeTransparency = 0.5
	    label.TextScaled = true
	    label.FontFace = customFont

	    local conn
	    conn = RunService.RenderStepped:Connect(function()
		    if not plr.Character or not plr.Character:FindFirstChild("Humanoid") then
			    gui:Destroy()
			    if conn then conn:Disconnect() end
			    BillboardESPs[plr] = nil
			    ESPConnections[plr] = nil
			    return
		    end

		    local hp = math.floor(plr.Character.Humanoid.Health / plr.Character.Humanoid.MaxHealth * 100)
		    label.Text = plr.Name .. " | " .. hp .. "%"
	    end)

	    BillboardESPs[plr] = gui
	    ESPConnections[plr] = conn
    end

    --// CHAMS ESP (BoxHandleAdornment)
    local function createChamsESP(plr)
	    if ChamsESPs[plr] or plr == LocalPlayer then return end
if not plr.Character or not getRoot(plr.Character) then return end

	    local folder = Instance.new("Folder")
	    folder.Name = "Chams_ESP"
	    folder.Parent = CoreGui
	    ChamsESPs[plr] = folder

	    for _, part in pairs(plr.Character:GetChildren()) do
		    if part:IsA("BasePart") then
			    local box = Instance.new("BoxHandleAdornment")
			    box.Name = "Cham_" .. plr.Name
			    box.Adornee = part
			    box.AlwaysOnTop = true
			    box.ZIndex = 10
			    box.Size = part.Size
			    box.Transparency = espTransparency
			    box.Color = BrickColor.new(
				    teamCheck and (plr.TeamColor == LocalPlayer.TeamColor and "Bright green" or "Bright red") or tostring(plr.TeamColor)
			    )
			    box.Parent = folder
		    end
	    end
    end

    --// CLEANUP FUNCTIONS
    local function cleanupBillboardESP()
	    for _, gui in pairs(BillboardESPs) do
		    if gui then gui:Destroy() end
	    end
	    for _, conn in pairs(ESPConnections) do
		    if conn then conn:Disconnect() end
	    end
	    BillboardESPs = {}
	    ESPConnections = {}
    end

    local function cleanupChamsESP()
	    for _, folder in pairs(ChamsESPs) do
		    if folder then folder:Destroy() end
	    end
	    ChamsESPs = {}
    end

    --// INITIALIZATION HANDLER
    local function handlePlayerESP(plr)
	    if ESPEnabled then createBillboardESP(plr) end
	    if ChamsEnabled then createChamsESP(plr) end

	    plr.CharacterAdded:Connect(function()
		    task.wait(1)
		    if ESPEnabled then createBillboardESP(plr) end
		    if ChamsEnabled then createChamsESP(plr) end
	    end)
    end

    --// GUI TOGGLES (INTEGRATE INTO YOUR UI)
    Visuals:Toggle({
        Title = "ESP",
        Desc = "Show player names and health",
        Value = false,
        Callback = function(state)
	        ESPEnabled = state
	        if not state then
		        cleanupBillboardESP()
	        else
		        for _, plr in pairs(Players:GetPlayers()) do
			        if plr ~= LocalPlayer then
				        createBillboardESP(plr)
			        end
		        end
	        end
        end
    })

    Visuals:Toggle({
        Title = "Chams",
        Desc = "Show player outlines through walls",
        Value = false,
        Callback = function(state)
	        ChamsEnabled = state
	        if not state then
		        cleanupChamsESP()
	        else
		        for _, plr in pairs(Players:GetPlayers()) do
			        if plr ~= LocalPlayer then
				        createChamsESP(plr)
			        end
		        end
	        end
        end
    })

    --// INIT ON CURRENT PLAYERS
    for _, plr in pairs(Players:GetPlayers()) do
	    if plr ~= LocalPlayer then
		    handlePlayerESP(plr)
	    end
    end

    Players.PlayerAdded:Connect(function(plr)
	    handlePlayerESP(plr)
    end)

    --// FOV CIRCLE
    local FOVCircle = Drawing.new("Circle")
    FOVCircle.Visible = false
    FOVCircle.Color = Color3.fromRGB(255, 255, 255)
    FOVCircle.Transparency = 1
    FOVCircle.Thickness = 1
    FOVCircle.Filled = false
    FOVCircle.ZIndex = 2

    local FOVRadius = 100

    RunService.RenderStepped:Connect(function()
	    if FOVCircle.Visible then
		    FOVCircle.Radius = FOVRadius
		    FOVCircle.Position = UserInputService:GetMouseLocation()
	    end
    end)

    Visuals:Toggle({
        Title = "FOV Circle",
        Desc = "Show FOV circle on screen",
        Value = false,
        Callback = function(state)
	        FOVCircle.Visible = state
        end
    })
end

-- Misc Tab
local Misc = Window:Tab({Title = "Misc", Icon = "more-horizontal"}) do
    Misc:Section({Title = "Extra Scripts"})

    Misc:Button({
        Title = "Infinite Yield",
        Desc = "Load infinite yield admin commands",
        Callback = function()
            loadstring(game:HttpGet("https://raw.githubusercontent.com/EdgeIY/infiniteyield/master/source"))()
        end
    })

    Misc:Button({
        Title = "Emote GUI",
        Desc = "Load R6 animation emote GUI",
        Callback = function()
            loadstring(game:HttpGet("https://raw.githubusercontent.com/dimension-sources/random-scripts-i-found/refs/heads/main/r6%20animations"))()
        end
    })

    Misc:Button({
        Title = "Anti AFK",
        Desc = "Prevent getting kicked for being AFK",
        Callback = function()
            wait(0.5)local ba=Instance.new("ScreenGui")
            local ca=Instance.new("TextLabel")local da=Instance.new("Frame")
            local _b=Instance.new("TextLabel")local ab=Instance.new("TextLabel")ba.Parent=game.CoreGui
            ba.ZIndexBehavior=Enum.ZIndexBehavior.Sibling;ca.Parent=ba;ca.Active=true
            ca.BackgroundColor3=Color3.new(0.176471,0.176471,0.176471)ca.Draggable=true
            ca.Position=UDim2.new(0.698610067,0,0.098096624,0)ca.Size=UDim2.new(0,370,0,52)
            ca.Font=Enum.Font.SourceSansSemibold;ca.Text="anti afk"ca.TextColor3=Color3.new(0,1,1)
            ca.TextSize=22;da.Parent=ca
            da.BackgroundColor3=Color3.new(0.196078,0.196078,0.196078)da.Position=UDim2.new(0,0,1.0192306,0)
            da.Size=UDim2.new(0,370,0,107)_b.Parent=da
            _b.BackgroundColor3=Color3.new(0.176471,0.176471,0.176471)_b.Position=UDim2.new(0,0,0.800455689,0)
            _b.Size=UDim2.new(0,370,0,21)_b.Font=Enum.Font.Arial;_b.Text="anti afk"
            _b.TextColor3=Color3.new(0,1,1)_b.TextSize=20;ab.Parent=da
            ab.BackgroundColor3=Color3.new(0.176471,0.176471,0.176471)ab.Position=UDim2.new(0,0,0.158377,0)
            ab.Size=UDim2.new(0,370,0,44)ab.Font=Enum.Font.ArialBold;ab.Text="status: active"
            ab.TextColor3=Color3.new(0,1,1)ab.TextSize=20;local bb=game:service'VirtualUser'
            game:service'Players'.LocalPlayer.Idled:connect(function()
            bb:CaptureController()bb:ClickButton2(Vector2.new())
            ab.Text="roblox tried to kick you but failed to do so!"wait(2)ab.Text="status : active"end)
        end
    })

    Misc:Button({
        Title = "Turtle Spy",
        Desc = "Load turtle spy remote spy tool",
        Callback = function()
            loadstring(game:HttpGet("https://raw.githubusercontent.com/Turtle-Brand/Turtle-Spy/main/source.lua", true))()
        end
    })
end

-- Final Notification
Window:Notify({
    Title = "99 Nights in the Forest",
    Desc = "Script loaded successfully! Discord: https://discord.gg/PaRYpmJ4cG",
    Time = 4
})
